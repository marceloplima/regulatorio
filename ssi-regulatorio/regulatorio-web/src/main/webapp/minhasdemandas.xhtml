<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="template/padrao.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html"
  	xmlns:f="http://java.sun.com/jsf/core"
  	xmlns:ui="http://java.sun.com/jsf/facelets"
  	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  	xsi:schemaLocation="http://www.w3.org/1999/xhtml http://www.w3.org/2002/08/xhtml/xhtml1-transitional.xsd"
 	xmlns:a4j="http://richfaces.org/a4j"
 	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="conteudosistema">
	
		<rich:panel id="ssiinicial">
			<h:form id="minhasdemandasform">
				<rich:dataTable keepSaved="true" id="dtminhasdemandas" value="#{bandeirinhasBean.demandasCriadasPelaPessoaLogada}" var="demanda">
					<h:panelGroup layout="block" class="linha" />
					
					<f:facet name="header">
						<rich:columnGroup>
							<rich:column style="text-align:left;">
								<h:outputText value="#{msg['header.numero']}" />
							</rich:column>

							<rich:column style="text-align:left;">
								<h:outputText value="#{msg['header.autor']}" />
							</rich:column>

							<rich:column style="text-align:left;">
								<h:outputText value="#{msg['header.encarregado']}" />
							</rich:column>

							<rich:column style="text-align:left;">
								<h:outputText value="#{msg['header.solicitante']}" />
							</rich:column>

							<rich:column style="text-align:left;">
								<h:outputText value="#{msg['header.status']}" />
							</rich:column>

							<rich:column style="text-align:left;">
								<h:outputText value="#{msg['header.data.cadastro']}" />
							</rich:column>

							<rich:column style="text-align:left;">
								<h:outputText value="#{msg['header.prazo']}" />
							</rich:column>
						</rich:columnGroup>
					</f:facet>

					<rich:column style="text-align:left;">
						<h:graphicImage value="/imagens/vencido.png" rendered="#{demanda.estadoDemanda eq 1}"/>
						<h:graphicImage value="/imagens/naoVence.png"  rendered="#{demanda.estadoDemanda eq 4}"/>
						<h:graphicImage value="/imagens/vaiVencer.png" rendered="#{demanda.estadoDemanda eq 2}"/>
						<h:graphicImage value="/imagens/venceHoje.png"  rendered="#{demanda.estadoDemanda eq 3}"/>					
						<h:outputText value="#{demanda.numeroDemanda}" />
						<h:outputText value="#{msg['label.semNumero']}"
							rendered="#{demanda.numeroDemanda eq null}" />
					</rich:column>

					<rich:column style="text-align:left;">
						<h:outputText value="#{demanda.autor.cnmnome}" />
					</rich:column>

					<rich:column style="text-align:left;">
						<h:outputText value="#{demanda.encarregado.cnmnome}" />
					</rich:column>

					<rich:column style="text-align:left;">
						<h:outputText value="#{demanda.solicitante.cnmnome}" />
					</rich:column>

					<rich:column style="text-align:left;">
						<h:outputText value="#{demanda.status.descricao}" />
					</rich:column>

					<rich:column style="text-align:left;">
						<h:outputText value="#{demanda.dataHoraDemanda}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
						</h:outputText>
					</rich:column>

					<rich:column style="text-align:left;">
						<h:outputText value="#{demanda.prazo}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</rich:column>

					<rich:column style="text-align:right;">
						<h:commandLink action="#{indexBean.consultaDemanda(demanda.id)}">
							<h:graphicImage value="imagens/busca_azul.png" />
						</h:commandLink>
					</rich:column>
		
				</rich:dataTable>
			</h:form>
		</rich:panel>								
  	</ui:define>
</ui:composition>